---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import CreativeSection from '../components/CreativeSection.astro';
import About from '../components/About.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';

// Featured products with screenshots
const featuredProducts = [
  {
    name: "Canon",
    year: "2025",
    description: "Intelligent chord progression builder with harmonic tension analysis.",
    screenshot: "/images/Canon Banner.png",
    link: "https://canonchords.com/",
    tag: "iOS App",
    crop: "contain",
    bg: "#F8F7F4",
    padded: true
  },
  {
    name: "Arbit Studio",
    year: "2024",
    description: "Web-based music studio with decentralized storage on Arweave blockchain.",
    screenshot: "/images/Arbit Banner.png",
    link: "https://arbitstudio.ar.io/",
    tag: "Permaweb",
    crop: "center"
  },
  {
    name: "Voyager",
    year: "2024",
    description: "Censorship-resistant scripture translations via Arweave blockchain.",
    screenshot: "/images/Voyager Banner.png",
    link: "https://voyager.ar.io/",
    tag: "Permaweb",
    crop: "contain",
    bg: "#FFFFFF",
    padded: true
  },
  {
    name: "Vivace Theory",
    year: "2022",
    description: "Identify chords from input notes with formal academic naming.",
    screenshot: "/images/Vivace Banner.png",
    link: "https://apps.apple.com/us/app/vivace-theory/id1603885678",
    tag: "iOS App",
    crop: "contain",
    bg: "#FFFFFF",
    padded: true
  },
  {
    name: "Chord Solver",
    year: "2021",
    description: "21,000+ installs. Enter any root note and get chord voicings.",
    screenshot: "/images/CS Banner.png",
    link: "https://apps.apple.com/us/app/chord-solver/id1564025162",
    tag: "iOS App",
    crop: "center"
  },
  {
    name: "Scripture",
    year: "2023-26",
    description: "Semantic Bible search running entirely in the browser.",
    screenshot: "/images/GS Banner.png",
    link: "https://github.com/dpshade/scripture",
    tag: "iOS App",
    crop: "center"
  }
];

const openSourceProjects = [
  {
    name: "jj-opencode",
    year: "2025",
    description: "JJ define-before-implement workflow plugin for OpenCode.",
    link: "https://github.com/dpshade/jj-opencode",
    bg: "#2a2a2a"
  },
  {
    name: "LLM Fuel",
    year: "2025",
    description: "Documentation aggregation pipeline for AI training.",
    link: "https://github.com/dpshade/permaweb-llm-fuel",
    bg: "#2d2d2d"
  },
  {
    name: "Glossary",
    year: "2025",
    description: "15x perf optimization. Featured in ar.io docs.",
    link: "https://github.com/dpshade/permaweb-glossary",
    bg: "#282828"
  },
  {
    name: "raycast-opencode",
    year: "2025",
    description: "Raycast extension for OpenCode with session search.",
    link: "https://github.com/dpshade/raycast-opencode",
    bg: "#2b2b2b"
  },
  {
    name: "Prompt Suite",
    year: "2025",
    description: "AI context management with CLI, TUI, and Raycast.",
    link: "https://github.com/dpshade/pocket-prompt-suite",
    bg: "#2e2e2e"
  },
  {
    name: "auto-title",
    year: "2025",
    description: "Obsidian plugin for automatic note naming via LLM.",
    link: "https://github.com/dpshade/auto-title",
    bg: "#292929"
  }
];

const experience = [
  {
    name: "Forward Research",
    role: "Software Engineer",
    year: "2025",
    description: "Developer tooling, AI documentation system, AO Cookbook",
    bg: "#1e2a3a"
  },
  {
    name: "JPMorgan Chase",
    role: "Software Engineer",
    year: "2023–25",
    description: "AWS migration, LLM-powered systems, 2x Hackathon Champion",
    bg: "#2a2520"
  },
  {
    name: "Stantec",
    role: "Data Science Intern",
    year: "2023",
    description: "DBScan clustering, model testing dashboard, anomaly detection",
    bg: "#252025"
  },
  {
    name: "CSI",
    role: "Software Developer Intern",
    year: "2022",
    description: "Full-stack enterprise application development",
    bg: "#202525"
  },
  {
    name: "OpenText",
    role: "Software Developer Intern",
    year: "2021",
    description: "Enterprise content management solutions",
    bg: "#252520"
  }
];

const education = [
  {
    name: "University of Kentucky",
    role: "BS Computer Science",
    year: "2019–23",
    description: "Minor in Music. Resident Advisor 2020–2022",
    bg: "#1e2a2a"
  },
  {
    name: "AWS",
    role: "Cloud Practitioner",
    year: "2023",
    description: "Certified Cloud Practitioner certification",
    bg: "#2a2a1e"
  }
];

const panels = ['hero', 'work', 'creative', 'about', 'contact'];
---

<Layout>

  <div id="horizontal-scroller" class="horizontal-scroller">
    <!-- Panel 0: Hero -->
    <section id="hero" class="panel" data-panel="0">
      <Hero />
    </section>

    <!-- Panel 1: Bento Grid Timeline -->
    <section id="work" class="panel bento-panel" data-panel="1">
      <div class="bento-header">
        <h2 class="bento-title">
          <span class="title-word">Time</span><span class="title-word title-accent">line</span>
        </h2>
        <span class="title-subtext">// journey so far</span>
      </div>
      <div class="bento-layout">
        <!-- Left Column: Products + OSS -->
        <div class="bento-left">
          <!-- Products Grid Area (compact) -->
          <div class="bento-grid">
            <!-- Hero Card: Canon -->
            <a
              href={featuredProducts[0].link}
              target="_blank"
              rel="noopener"
              class="bento-card bento-hero"
              style="--card-index: 0;"
            >
              <div class="bento-card-screenshot" style={`background: ${featuredProducts[0].bg || 'var(--color-surface)'};`}>
                <img src={featuredProducts[0].screenshot} alt={featuredProducts[0].name} class="crop-contain" />
                <div class="bento-card-overlay">
                  <svg class="bento-card-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M7 17L17 7M17 7H7M17 7V17" />
                  </svg>
                </div>
              </div>
              <div class="bento-card-info">
                <div class="bento-card-meta">
                  <span class="bento-card-name">{featuredProducts[0].name}</span>
                  <span class="bento-card-tag">{featuredProducts[0].tag} · {featuredProducts[0].year}</span>
                </div>
              </div>
            </a>

            <!-- Small Cards -->
            {featuredProducts.slice(1, 5).map((product: any, i: number) => (
              <a
                href={product.link}
                target="_blank"
                rel="noopener"
                class="bento-card bento-small"
                style={`--card-index: ${i + 1};`}
              >
                <div class="bento-card-screenshot bento-card-screenshot--compact" style={`background: ${product.bg || 'var(--color-surface)'};`}>
                  <img src={product.screenshot} alt={product.name} class={`crop-${product.crop}`} />
                  <div class="bento-card-overlay">
                    <svg class="bento-card-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M7 17L17 7M17 7H7M17 7V17" />
                    </svg>
                  </div>
                </div>
                <div class="bento-card-info bento-card-info--compact">
                  <span class="bento-card-name">{product.name}</span>
                  <span class="bento-card-tag">{product.tag}</span>
                </div>
              </a>
            ))}
          </div>

          <!-- OSS Section (expanded) -->
          <div class="bento-oss-section">
            <div class="bento-section-header">
              <span class="bento-section-label">Open Source</span>
              <span class="bento-section-count">{openSourceProjects.length} repos</span>
            </div>
            <div class="bento-oss-grid" data-row="oss">
              {openSourceProjects.map((project: any, i: number) => (
                <a href={project.link} target="_blank" rel="noopener" class="bento-oss-card" style={`background: ${project.bg}; --card-index: ${i};`}>
                  <div class="bento-oss-header">
                    <svg class="bento-oss-gh" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span class="bento-oss-name">{project.name}</span>
                    <svg class="bento-oss-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M7 17L17 7M17 7H7M17 7V17" />
                    </svg>
                  </div>
                  <p class="bento-oss-desc">{project.description}</p>
                </a>
              ))}
            </div>
          </div>
        </div>

        <!-- Right Column: Experience & Education -->
        <div class="bento-right">
          <!-- Experience Section -->
          <div class="bento-experience-section">
            <div class="bento-section-header">
              <span class="bento-section-label">Experience</span>
              <span class="bento-section-count">{experience.length}</span>
            </div>
            <div class="bento-experience-list">
              {experience.map((item: any, i: number) => (
                <div class="bento-exp-item" style={`--item-index: ${i};`}>
                  <div class="bento-exp-header">
                    <span class="bento-exp-name">{item.name}</span>
                    <span class="bento-exp-year">{item.year}</span>
                  </div>
                  <span class="bento-exp-role">{item.role}</span>
                  <p class="bento-exp-desc">{item.description}</p>
                </div>
              ))}
            </div>
          </div>

          <!-- Education Section -->
          <div class="bento-education-section">
            <div class="bento-section-header">
              <span class="bento-section-label">Education</span>
            </div>
            <div class="bento-education-grid">
              {education.map((item: any, i: number) => (
                <div class="bento-edu-item" style={`--item-index: ${i + experience.length};`}>
                  <span class="bento-edu-name">{item.name}</span>
                  <span class="bento-edu-role">{item.role}</span>
                  <span class="bento-edu-year">{item.year}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Panel 2: Creative -->
    <section id="creative" class="panel" data-panel="2">
      <div class="panel-scroll panel-scroll--no-pad">
        <CreativeSection />
      </div>
    </section>

    <!-- Panel 3: About -->
    <section id="about" class="panel" data-panel="3">
      <div class="panel-scroll panel-scroll--no-pad">
        <About />
      </div>
    </section>

    <!-- Panel 4: Contact -->
    <section id="contact" class="panel contact-panel" data-panel="4">
      <div class="panel-scroll contact-scroll">
        <Contact />
        <Footer />
      </div>
    </section>
  </div>

  <!-- Edge Navigation - Left -->
  <button id="edge-nav-left" class="edge-nav edge-nav--left hidden" aria-label="Previous section">
    <span class="edge-nav-text" id="edge-nav-left-text">Home</span>
  </button>

  <!-- Edge Navigation - Right -->
  <button id="edge-nav-right" class="edge-nav edge-nav--right" aria-label="Next section">
    <span class="edge-nav-text" id="edge-nav-right-text">Timeline</span>
  </button>

  <!-- Side navigation (horizontal, bottom center) -->
  <nav id="side-nav" class="side-nav" aria-label="Section navigation">
    <button class="side-nav-arrow prev" aria-label="Previous section" data-direction="prev">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M15 18l-6-6 6-6" />
      </svg>
    </button>

    <div class="side-nav-dots">
      {panels.map((panel, i) => (
        <button
          class={`side-nav-dot ${i === 0 ? 'active' : ''}`}
          data-panel={i}
          aria-label={`Go to ${panel}`}
        >
          <span class="dot-line"></span>
        </button>
      ))}
    </div>

    <span id="current-label" class="current-label">Home</span>

    <button class="side-nav-arrow next" aria-label="Next section" data-direction="next">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M9 6l6 6-6 6" />
      </svg>
    </button>

    <!-- Progress bar integrated into pill -->
    <div class="pull-bar">
      <div id="pull-progress" class="pull-progress"></div>
    </div>
  </nav>
</Layout>

<script>
  const scroller = document.getElementById('horizontal-scroller');
  const sideNavDots = document.querySelectorAll('.side-nav-dot');
  const sideNav = document.getElementById('side-nav');
  const navLinks = document.querySelectorAll('.nav-link');
  const pullProgress = document.getElementById('pull-progress');
  const currentLabel = document.getElementById('current-label');
  const edgeNavLeft = document.getElementById('edge-nav-left');
  const edgeNavRight = document.getElementById('edge-nav-right');
  const edgeNavLeftText = document.getElementById('edge-nav-left-text');
  const edgeNavRightText = document.getElementById('edge-nav-right-text');
  const panelNames = ['Home', 'Timeline', 'Creative', 'About', 'Contact'];

  let isScrolling = false;
  let currentPanel = 0;
  const totalPanels = 5;

  // Scroll accumulation for panel switching
  let scrollAccumulator = 0;
  const SCROLL_THRESHOLD = 400;
  const SCROLL_RESET_DELAY = 300;
  let resetTimeout: number | null = null;

  // Lerp-based smooth scrolling for internal horizontal containers
  // Increased from 0.1 to 0.18 for snappier, more responsive feel
  // This only affects nested scroll containers, not main panel transitions
  const LERP_FACTOR = 0.18;
  const WHEEL_SENSITIVITY = 2;
  const LERP_THRESHOLD = 0.1;  // Reduced from 0.5 for smoother animation completion
  let isAnimating = false;
  let lastAnimationTime = 0;

  // Store target scroll positions
  const scrollTargets = new Map<HTMLElement, number>();

  function getCurrentPanelElement(): HTMLElement | null {
    return document.querySelector(`.panel[data-panel="${currentPanel}"]`);
  }

  // Get horizontal scroll containers for a panel
  // Returns array of { element, maxScroll, rate } where rate is relative speed
  function getHorizontalScrollers(panel: HTMLElement): { el: HTMLElement; max: number; rate: number }[] {
    const scrollers: { el: HTMLElement; max: number; rate: number }[] = [];

    // Bento Timeline panel (1): Check for any horizontal scrollers
    if (currentPanel === 1) {
      // Legacy OSS scroll container (if it exists with horizontal overflow)
      const bentoOssScroll = panel.querySelector('.bento-oss-scroll') as HTMLElement;
      if (bentoOssScroll) {
        const max = bentoOssScroll.scrollWidth - bentoOssScroll.clientWidth;
        if (max > 0) scrollers.push({ el: bentoOssScroll, max, rate: 1 });
      }

      // Legacy featured products row (for backwards compatibility)
      const featuredScroll = panel.querySelector('.featured-scroll') as HTMLElement;
      if (featuredScroll) {
        const max = featuredScroll.scrollWidth - featuredScroll.clientWidth;
        if (max > 0) scrollers.push({ el: featuredScroll, max, rate: 1 });
      }

      // Legacy row-scroll elements
      const rowScrolls = panel.querySelectorAll('.row-scroll') as NodeListOf<HTMLElement>;
      rowScrolls.forEach(rowScroll => {
        const max = rowScroll.scrollWidth - rowScroll.clientWidth;
        if (max > 0) scrollers.push({ el: rowScroll, max, rate: 1 });
      });

      // Normalize rates so all rows scroll proportionally to their content
      if (scrollers.length > 1) {
        const maxMax = Math.max(...scrollers.map(s => s.max));
        scrollers.forEach(s => {
          s.rate = s.max / maxMax;
        });
      }
    }

    return scrollers;
  }

  // Check if all horizontal scrollers are at boundary (using target position)
  function checkHorizontalBoundary(scrollers: { el: HTMLElement; max: number; rate: number }[], direction: number): boolean {
    if (scrollers.length === 0) return true;

    return scrollers.every(s => {
      const target = scrollTargets.get(s.el) ?? s.el.scrollLeft;
      if (direction > 0) {
        return target >= s.max - 2;
      } else {
        return target <= 2;
      }
    });
  }

  // Scroll horizontal containers with lerp-based smoothing
  function scrollHorizontalContainers(scrollers: { el: HTMLElement; max: number; rate: number }[], delta: number) {
    scrollers.forEach(s => {
      // Get current target or initialize from current position
      let target = scrollTargets.get(s.el) ?? s.el.scrollLeft;

      // Update target position
      const scrollAmount = delta * WHEEL_SENSITIVITY * s.rate;
      target = Math.max(0, Math.min(target + scrollAmount, s.max));
      scrollTargets.set(s.el, target);
    });

    // Start animation if not running
    if (!isAnimating) {
      isAnimating = true;
      lastAnimationTime = 0;
      requestAnimationFrame(animateScroll);
    }
  }

  function animateScroll(currentTime: number) {
    const panel = getCurrentPanelElement();
    if (!panel) {
      isAnimating = false;
      return;
    }

    // Frame-rate independent animation using delta time
    const deltaTime = lastAnimationTime ? Math.min((currentTime - lastAnimationTime) / 1000, 0.1) : 0.016;
    lastAnimationTime = currentTime;

    // Calculate frame-independent lerp factor
    // Using exponential decay: factor = 1 - e^(-rate * dt)
    // Rate of 12 gives responsive feel across 60Hz and 120Hz displays
    const rate = 12;
    const frameFactor = 1 - Math.exp(-rate * deltaTime);

    const scrollers = getHorizontalScrollers(panel);

    // BATCH ALL READS FIRST to avoid layout thrashing
    const scrollerStates = scrollers.map(s => ({
      el: s.el,
      current: s.el.scrollLeft,
      target: scrollTargets.get(s.el) ?? s.el.scrollLeft,
      max: s.max
    }));

    let stillAnimating = false;

    // BATCH ALL WRITES
    scrollerStates.forEach(({ el, current, target, max }) => {
      const diff = target - current;

      if (Math.abs(diff) > LERP_THRESHOLD) {
        const next = current + diff * frameFactor;
        el.scrollLeft = Math.max(0, Math.min(next, max));
        stillAnimating = true;
      } else if (Math.abs(diff) > 0) {
        // Snap to exact target when close enough
        el.scrollLeft = target;
      }
    });

    if (stillAnimating) {
      requestAnimationFrame(animateScroll);
    } else {
      isAnimating = false;
      lastAnimationTime = 0;
    }
  }

  function showPullIndicator(progress: number) {
    if (!pullProgress) return;
    const progressPercent = Math.min(progress * 100, 100);
    pullProgress.style.width = `${progressPercent}%`;
  }

  function hidePullIndicator() {
    if (!pullProgress) return;
    pullProgress.style.width = '0%';
  }

  // Wheel event handler - converts vertical scroll to horizontal for Work/Timeline panels
  function handleWheel(e: WheelEvent) {
    // Clear existing reset timeout
    if (resetTimeout) {
      clearTimeout(resetTimeout);
    }

    const panel = getCurrentPanelElement();
    if (!panel) return;

    const scrollDirection = e.deltaY > 0 ? 1 : -1;

    // For Work and Timeline panels - convert vertical to horizontal scroll
    const horizontalScrollers = getHorizontalScrollers(panel);

    if (horizontalScrollers.length > 0) {
      e.preventDefault();
      if (isScrolling) return;

      const atBoundary = checkHorizontalBoundary(horizontalScrollers, scrollDirection);

      if (!atBoundary) {
        // Scroll horizontally using lerp-based smoothing
        scrollHorizontalContainers(horizontalScrollers, e.deltaY);
        scrollAccumulator = 0;
        hidePullIndicator();
        return;
      }

      // At boundary - accumulate for panel switch
      handlePanelSwitchAccumulation(e, scrollDirection);
      return;
    }

    // Check for vertical panel-scroll containers (Creative, About, Contact)
    const panelScroll = panel.querySelector('.panel-scroll') as HTMLElement;

    if (panelScroll) {
      const { scrollTop, scrollHeight, clientHeight } = panelScroll;
      const atTop = scrollTop <= 1;
      const atBottom = scrollTop + clientHeight >= scrollHeight - 1;

      // Allow natural vertical scroll if not at boundaries
      if ((e.deltaY < 0 && !atTop) || (e.deltaY > 0 && !atBottom)) {
        scrollAccumulator = 0;
        hidePullIndicator();
        return;
      }

      e.preventDefault();
      if (isScrolling) return;
      handlePanelSwitchAccumulation(e, scrollDirection);
      return;
    }

    // Hero panel or other - direct panel switch accumulation
    e.preventDefault();
    if (isScrolling) return;
    handlePanelSwitchAccumulation(e, scrollDirection);
  }

  function handlePanelSwitchAccumulation(e: WheelEvent, scrollDirection: number) {
    const canGoNext = currentPanel < totalPanels - 1;
    const canGoPrev = currentPanel > 0;

    if ((scrollDirection > 0 && !canGoNext) || (scrollDirection < 0 && !canGoPrev)) {
      scrollAccumulator = 0;
      hidePullIndicator();
      return;
    }

    // Reset if direction changed
    if ((scrollAccumulator > 0 && e.deltaY < 0) || (scrollAccumulator < 0 && e.deltaY > 0)) {
      scrollAccumulator = 0;
    }

    scrollAccumulator += e.deltaY;

    const progress = Math.abs(scrollAccumulator) / SCROLL_THRESHOLD;
    showPullIndicator(progress);

    if (Math.abs(scrollAccumulator) >= SCROLL_THRESHOLD) {
      const direction = scrollAccumulator > 0 ? 1 : -1;
      const nextPanel = Math.max(0, Math.min(totalPanels - 1, currentPanel + direction));

      if (nextPanel !== currentPanel) {
        hidePullIndicator();
        scrollToPanel(nextPanel);
        scrollAccumulator = 0;
      }
    }

    resetTimeout = setTimeout(() => {
      scrollAccumulator = 0;
      hidePullIndicator();
    }, SCROLL_RESET_DELAY) as unknown as number;
  }

  function scrollToPanel(index: number) {
    if (!scroller || isScrolling) return;

    isScrolling = true;
    currentPanel = index;

    // CRITICAL FIX: Temporarily disable scroll-snap during programmatic scroll
    // This prevents the "double animation" where CSS snap fights with JS scrollTo
    scroller.style.scrollSnapType = 'none';

    const panelWidth = window.innerWidth;

    // Use JS smooth scroll (CSS scroll-behavior removed from stylesheet)
    scroller.scrollTo({
      left: index * panelWidth,
      behavior: 'smooth'
    });

    updateIndicators(index);

    // Reset horizontal scrollers in new panel to start
    setTimeout(() => {
      const panel = getCurrentPanelElement();
      if (panel) {
        const scrollers = getHorizontalScrollers(panel);
        scrollers.forEach(s => {
          s.el.scrollLeft = 0;
          scrollTargets.set(s.el, 0);
        });
      }
    }, 100);

    // Use scrollend event for accurate scroll completion detection
    // This replaces the arbitrary 600ms timeout that caused state desync
    const handleScrollEnd = () => {
      scroller.removeEventListener('scrollend', handleScrollEnd);
      // Re-enable scroll-snap after animation completes
      scroller.style.scrollSnapType = 'x mandatory';
      isScrolling = false;
    };

    // Modern browsers support scrollend (baseline Dec 2025)
    if ('onscrollend' in window) {
      scroller.addEventListener('scrollend', handleScrollEnd, { once: true });
      // Safety fallback in case scrollend doesn't fire
      setTimeout(() => {
        scroller.removeEventListener('scrollend', handleScrollEnd);
        scroller.style.scrollSnapType = 'x mandatory';
        isScrolling = false;
      }, 800);
    } else {
      // Fallback for older browsers
      setTimeout(() => {
        scroller.style.scrollSnapType = 'x mandatory';
        isScrolling = false;
      }, 600);
    }
  }

  function updateIndicators(index: number) {
    sideNavDots.forEach((dot, i) => {
      dot.classList.toggle('active', i === index);
    });

    navLinks.forEach((link, i) => {
      link.classList.toggle('active', i === index);
    });

    if (currentLabel) {
      currentLabel.textContent = panelNames[index];
    }

    if (sideNav) {
      if (index === 0) {
        sideNav.classList.add('hidden');
      } else {
        sideNav.classList.remove('hidden');
      }
    }

    // Update edge navigation
    if (edgeNavLeft && edgeNavLeftText) {
      if (index > 1) {
        // Hide on Home (0) and Timeline (1) - don't show "back to Home"
        edgeNavLeft.classList.remove('hidden');
        edgeNavLeftText.textContent = panelNames[index - 1];
      } else {
        edgeNavLeft.classList.add('hidden');
      }
    }

    if (edgeNavRight && edgeNavRightText) {
      if (index < totalPanels - 1) {
        edgeNavRight.classList.remove('hidden');
        edgeNavRightText.textContent = panelNames[index + 1];
      } else {
        edgeNavRight.classList.add('hidden');
      }
    }

    // Add panel-visible class for entry animations
    document.querySelectorAll('.panel').forEach((panel, i) => {
      if (i === index) {
        panel.classList.add('panel-visible');
      }
    });
  }

  // Click on side nav dots
  sideNavDots.forEach((dot) => {
    dot.addEventListener('click', () => {
      const panel = parseInt(dot.getAttribute('data-panel') || '0');
      scrollToPanel(panel);
    });
  });

  // Arrow buttons
  document.querySelectorAll('.side-nav-arrow').forEach(btn => {
    btn.addEventListener('click', () => {
      const direction = btn.getAttribute('data-direction');
      if (direction === 'prev' && currentPanel > 0) {
        scrollToPanel(currentPanel - 1);
      } else if (direction === 'next' && currentPanel < totalPanels - 1) {
        scrollToPanel(currentPanel + 1);
      }
    });
  });

  // Edge navigation click handlers
  if (edgeNavLeft) {
    edgeNavLeft.addEventListener('click', () => {
      if (currentPanel > 0) {
        scrollToPanel(currentPanel - 1);
      }
    });
  }

  if (edgeNavRight) {
    edgeNavRight.addEventListener('click', () => {
      if (currentPanel < totalPanels - 1) {
        scrollToPanel(currentPanel + 1);
      }
    });
  }

  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
      e.preventDefault();
      scrollToPanel(Math.min(totalPanels - 1, currentPanel + 1));
    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
      e.preventDefault();
      scrollToPanel(Math.max(0, currentPanel - 1));
    }
  });

  // Scroll snap detection for manual scrolling
  if (scroller) {
    scroller.addEventListener('scrollend', () => {
      const panelWidth = window.innerWidth;
      const newPanel = Math.round(scroller.scrollLeft / panelWidth);
      if (newPanel !== currentPanel) {
        currentPanel = newPanel;
        updateIndicators(newPanel);
      }
    });
  }

  // Initialize wheel listener
  document.addEventListener('wheel', handleWheel, { passive: false });

  // Touch support for mobile
  let touchStartX = 0;
  let touchStartY = 0;

  document.addEventListener('touchstart', (e) => {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
  }, { passive: true });

  document.addEventListener('touchend', (e) => {
    const touchEndX = e.changedTouches[0].clientX;
    const touchEndY = e.changedTouches[0].clientY;
    const deltaX = touchStartX - touchEndX;
    const deltaY = touchStartY - touchEndY;

    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
      if (deltaX > 0) {
        scrollToPanel(Math.min(totalPanels - 1, currentPanel + 1));
      } else {
        scrollToPanel(Math.max(0, currentPanel - 1));
      }
    }
  }, { passive: true });
</script>

<style>
  /* Horizontal scroll layout - explicit to ensure it works */
  :global(body) {
    overflow: hidden;
    width: 100vw;
    height: 100vh;
    overscroll-behavior: none;
  }

  .horizontal-scroller {
    display: flex;
    flex-direction: row;
    width: 100vw;
    height: 100vh;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    position: fixed;
    top: 0;
    left: 0;
    transform: translateZ(0);
    will-change: scroll-position;
  }

  /* Hide scrollbar for cleaner look */
  .horizontal-scroller::-webkit-scrollbar {
    display: none;
  }
  .horizontal-scroller {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .panel {
    flex: 0 0 100vw;
    width: 100vw;
    min-width: 100vw;
    height: 100vh;
    scroll-snap-align: start;
    position: relative;
    background: var(--color-paper);
  }

  .section-header {
    margin-bottom: var(--space-10);
  }

  .section-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--color-accent-gold);
    margin-bottom: var(--space-3);
  }

  .section-title {
    font-size: clamp(1.75rem, 4vw, 2.25rem);
  }

  .section-title-sm {
    font-size: clamp(1.25rem, 3vw, 1.5rem);
  }

  /* Work Panel - Horizontal scroll layout */
  .work-panel {
    display: flex;
    flex-direction: column;
    padding: var(--space-12) 0 var(--space-16);
  }

  .work-header {
    padding: 0 var(--space-8);
    margin-bottom: var(--space-6);
    flex-shrink: 0;
  }

  .work-rows {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    flex: 1;
  }

  .work-row {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .row-label {
    font-size: 0.625rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-ink-muted);
    padding-left: var(--space-8);
  }

  .projects-scroll,
  .oss-scroll {
    display: flex;
    gap: var(--space-3);
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0 var(--space-8);
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    align-items: flex-start;
  }

  .projects-scroll::-webkit-scrollbar,
  .oss-scroll::-webkit-scrollbar {
    display: none;
  }
  .projects-scroll,
  .oss-scroll {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .work-card-gh {
    width: 20px;
    height: 20px;
    color: var(--color-ink-muted);
    flex-shrink: 0;
    opacity: 0.6;
  }

  /* Uniform un.ms style cards */
  .work-card {
    flex: 0 0 200px;
    min-width: 200px;
    height: 160px;
    border-radius: var(--radius-md);
    padding: var(--space-4);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    text-decoration: none;
    transition: transform var(--duration-fast) var(--ease-out);
  }

  .work-card:hover {
    transform: translateY(-2px);
  }

  .work-card-header {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
  }

  .work-card-logo {
    width: 32px;
    height: 32px;
    border-radius: var(--radius-sm);
    object-fit: contain;
    flex-shrink: 0;
  }



  .work-card-meta {
    flex: 1;
    min-width: 0;
  }

  .work-card-name {
    display: block;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--color-ink);
    line-height: 1.3;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .work-card-year {
    display: block;
    font-size: 0.625rem;
    color: var(--color-ink-muted);
    margin-top: 1px;
  }

  .work-card-arrow {
    color: var(--color-ink-muted);
    flex-shrink: 0;
    opacity: 0.4;
    transition: opacity var(--duration-fast);
    width: 12px;
    height: 12px;
  }

  .work-card:hover .work-card-arrow {
    opacity: 1;
    color: var(--color-ink);
  }

  .work-card-desc {
    font-size: 0.6875rem;
    color: var(--color-ink-light);
    line-height: 1.5;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .work-header {
      padding-left: var(--space-4);
      padding-right: var(--space-4);
    }
    .projects-scroll {
      padding: 0 var(--space-4);
      gap: var(--space-3);
    }
    .work-card {
      flex: 0 0 180px;
      min-width: 180px;
      min-height: 140px;
      padding: var(--space-3);
    }
  }

  /* ============================================
     UNIFIED TIMELINE PANEL
     ============================================ */

  .timeline-panel {
    display: flex;
    flex-direction: column;
    padding: var(--space-4) 0 var(--space-4);
    height: 100vh;
    overflow: hidden;
  }

  .timeline-header {
    padding: 0 var(--space-8);
    margin-bottom: var(--space-1);
    flex-shrink: 0;
  }

  /* Enhanced title treatment */
  .title-container {
    display: flex;
    align-items: baseline;
    gap: var(--space-3);
    margin-bottom: var(--space-2);
  }

  .timeline-title {
    font-size: clamp(1.5rem, 4vw, 2rem);
    font-weight: 700;
    display: flex;
    gap: 0.05em;
    margin: 0;
  }

  .title-word {
    display: inline-block;
  }

  .title-accent {
    color: var(--color-accent-gold);
    position: relative;
  }

  /* Underline draws in on panel entry */
  .title-accent::after {
    content: '';
    position: absolute;
    bottom: 1px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--color-accent-gold);
    transition: width 600ms var(--ease-out) 300ms;
  }

  .panel-visible .title-accent::after {
    width: 100%;
  }

  .title-subtext {
    font-family: var(--font-mono, monospace);
    font-size: 0.6875rem;
    color: var(--color-ink-muted);
    opacity: 0;
    transform: translateX(-10px);
    transition: all 400ms var(--ease-out) 500ms;
  }

  .panel-visible .title-subtext {
    opacity: 0.4;
    transform: translateX(0);
  }

  .timeline-rows {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    flex: 1;
    min-height: 0;
  }

  /* ============================================
     FEATURED PRODUCTS ROW (Large screenshots)
     ============================================ */
  .featured-row {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 0 0 auto;
  }

  .featured-scroll {
    display: flex;
    gap: var(--space-4);
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0 var(--space-8);
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .featured-scroll::-webkit-scrollbar {
    display: none;
  }

  .featured-card {
    flex: 0 0 220px;
    min-width: 220px;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    opacity: 0;
    transform: translateY(10px);
  }

  .panel-visible .featured-card {
    animation: cardPop 350ms var(--ease-out) forwards;
    animation-delay: calc(100ms + var(--card-index, 0) * 60ms);
  }

  .featured-screenshot {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 10;
    border-radius: var(--radius-md);
    overflow: hidden;
    background: var(--color-surface);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    transition: transform 300ms var(--ease-out), box-shadow 300ms var(--ease-out);
  }

  .featured-card:hover .featured-screenshot {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
  }

  .featured-screenshot img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    transition: transform 400ms var(--ease-out);
  }

  /* Crop modes for different screenshots */
  .featured-screenshot img.crop-bottom {
    object-position: center bottom;
  }

  .featured-screenshot img.crop-top-third {
    object-position: center 30%;
  }

  .featured-screenshot img.crop-top-10 {
    object-position: center 10%;
  }

  .featured-screenshot img.crop-contain {
    object-fit: contain;
  }

  .featured-screenshot--padded {
    padding: 0 var(--space-3);
  }

  .featured-card:hover .featured-screenshot img {
    transform: scale(1.03);
  }

  /* For contain mode, don't scale on hover */
  .featured-card:hover .featured-screenshot img.crop-contain {
    transform: none;
  }

  .featured-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.35);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 200ms var(--ease-out);
  }

  .featured-card:hover .featured-overlay {
    opacity: 1;
  }

  .featured-arrow {
    width: 36px;
    height: 36px;
    padding: 8px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 50%;
    color: #1a1a1a;
    transform: scale(0.8);
    transition: transform 200ms var(--ease-bounce);
  }

  .featured-card:hover .featured-arrow {
    transform: scale(1);
  }

  /* ============================================
     MOBILE APP CARD LAYOUT (horizontal)
     ============================================ */
  .featured-card--mobile {
    flex-direction: row;
    flex: 0 0 320px;
    min-width: 320px;
    gap: var(--space-3);
    align-items: stretch;
  }

  .mobile-screenshot {
    position: relative;
    flex: 0 0 100px;
    height: 180px;
    border-radius: var(--radius-md);
    overflow: hidden;
    background: #FCFCFD;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    transition: transform 300ms var(--ease-out), box-shadow 300ms var(--ease-out);
  }

  .featured-card--mobile:hover .mobile-screenshot {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
  }

  .mobile-screenshot img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .mobile-screenshot .featured-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.35);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 200ms var(--ease-out);
  }

  .featured-card--mobile:hover .mobile-screenshot .featured-overlay {
    opacity: 1;
  }

  .mobile-info {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    gap: var(--space-2);
    flex: 1;
    min-width: 0;
  }

  .mobile-info .featured-desc {
    -webkit-line-clamp: 3;
  }

  @media (max-width: 768px) {
    .featured-card--mobile {
      flex: 0 0 280px;
      min-width: 280px;
    }
    .mobile-screenshot {
      flex: 0 0 80px;
      height: 150px;
    }
  }

  .featured-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    margin-left: var(--space-2);
  }

  .featured-top {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  .featured-logo {
    width: 24px;
    height: 24px;
    border-radius: var(--radius-sm);
    object-fit: contain;
  }

  .featured-meta {
    display: flex;
    flex-direction: column;
    gap: 1px;
  }

  .featured-name {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-ink);
  }

  .featured-tag {
    font-size: 0.5625rem;
    color: var(--color-ink-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .featured-desc {
    font-size: 0.6875rem;
    color: var(--color-ink-light);
    line-height: 1.4;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Peer dimming for featured cards */
  .featured-scroll:hover .featured-card:not(:hover) {
    opacity: 0.7;
  }

  /* ============================================
     COMPACT TIMELINE ROWS (OSS, Exp, Edu)
     ============================================ */

  /* Row entry animations */
  .timeline-row {
    display: flex;
    flex-direction: column;
    gap: 2px;
    opacity: 0;
    transform: translateX(30px);
    flex: 1;
    min-height: 0;
  }

  .panel-visible .timeline-row:nth-child(1) {
    animation: slideInRow 400ms var(--ease-out) 100ms forwards;
  }
  .panel-visible .timeline-row:nth-child(2) {
    animation: slideInRow 400ms var(--ease-out) 160ms forwards;
  }
  .panel-visible .timeline-row:nth-child(3) {
    animation: slideInRow 400ms var(--ease-out) 220ms forwards;
  }
  .panel-visible .timeline-row:nth-child(4) {
    animation: slideInRow 400ms var(--ease-out) 280ms forwards;
  }

  @keyframes slideInRow {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* Row header with icon */
  .row-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding-left: var(--space-8);
    flex-shrink: 0;
  }

  .row-label {
    font-size: 0.5625rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-ink-muted);
    transition: color 300ms;
  }

  .timeline-row:hover .row-label {
    color: var(--color-accent-gold);
  }

  .row-count {
    font-family: var(--font-mono, monospace);
    font-size: 0.5rem;
    color: var(--color-ink-muted);
    opacity: 0.4;
  }

  .row-scroll {
    display: flex;
    gap: var(--space-2);
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0 var(--space-8);
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    align-items: flex-start;
    flex: 1;
    min-height: 0;
  }

  .row-scroll::-webkit-scrollbar {
    display: none;
  }
  .row-scroll {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Timeline card - sizing to fit 4 rows */
  .timeline-card {
    flex: 0 0 200px;
    min-width: 200px;
    height: 100%;
    max-height: 135px;
    border-radius: var(--radius-md);
    padding: var(--space-3) var(--space-4);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition:
      transform 300ms var(--ease-out),
      box-shadow 300ms var(--ease-out);
  }

  /* Card entry animation */
  .timeline-card {
    opacity: 0;
    transform: translateY(10px);
  }

  .panel-visible .timeline-card {
    animation: cardPop 350ms var(--ease-out) forwards;
    animation-delay: calc(150ms + var(--card-index, 0) * 40ms);
  }

  @keyframes cardPop {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Hover: subtle lift + soft shadow */
  .timeline-card:hover {
    transform: translateY(-4px);
    box-shadow:
      0 12px 24px -6px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.06);
    z-index: 2;
  }

  /* Shimmer sweep on hover */
  .timeline-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(255, 255, 255, 0.04) 45%,
      rgba(255, 255, 255, 0.08) 50%,
      rgba(255, 255, 255, 0.04) 55%,
      transparent 60%
    );
    transform: translateX(-100%);
    transition: transform 500ms var(--ease-out);
    pointer-events: none;
    border-radius: inherit;
  }

  .timeline-card:hover::before {
    transform: translateX(100%);
  }

  /* Peer dimming - subtle */
  .row-scroll:hover .timeline-card:not(:hover) {
    opacity: 0.7;
  }

  .card-header {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
  }

  .card-logo {
    width: 30px;
    height: 30px;
    border-radius: var(--radius-sm);
    object-fit: contain;
    flex-shrink: 0;
  }

  .card-gh {
    width: 18px;
    height: 18px;
    color: var(--color-ink-muted);
    flex-shrink: 0;
    opacity: 0.5;
  }

  .card-meta {
    flex: 1;
    min-width: 0;
  }

  .card-name {
    display: block;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--color-ink);
    line-height: 1.25;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .card-role {
    display: block;
    font-size: 0.625rem;
    color: var(--color-ink-muted);
    margin-top: 1px;
  }

  .card-year {
    display: block;
    font-size: 0.625rem;
    color: var(--color-ink-muted);
    flex-shrink: 0;
  }

  .card-arrow {
    color: var(--color-ink-muted);
    flex-shrink: 0;
    opacity: 0.3;
    transition: opacity 200ms, transform 200ms;
    width: 12px;
    height: 12px;
  }

  .timeline-card:hover .card-arrow {
    opacity: 0.8;
    transform: translate(1px, -1px);
  }

  .card-desc {
    font-size: 0.6875rem;
    color: var(--color-ink-light);
    line-height: 1.45;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .timeline-row,
    .timeline-card,
    .title-accent::after,
    .title-subtext {
      animation: none !important;
      transition: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
    .title-accent::after {
      width: 100% !important;
    }
  }

  @media (max-width: 768px) {
    .timeline-panel {
      padding: var(--space-3) 0 calc(var(--space-16) + var(--space-4));
    }
    .timeline-header {
      padding-left: var(--space-4);
      padding-right: var(--space-4);
    }
    .title-container {
      flex-direction: column;
      gap: var(--space-1);
    }
    .row-header {
      padding-left: var(--space-4);
    }
    .featured-scroll {
      padding: 0 var(--space-4);
      gap: var(--space-3);
    }
    .featured-card {
      flex: 0 0 180px;
      min-width: 180px;
    }
    .featured-screenshot {
      aspect-ratio: 16 / 11;
    }
    .featured-name {
      font-size: 0.8125rem;
    }
    .featured-tag {
      font-size: 0.5rem;
    }
    .featured-desc {
      font-size: 0.625rem;
    }
    .row-scroll {
      padding: 0 var(--space-4);
    }
    .timeline-card {
      flex: 0 0 160px;
      min-width: 160px;
      max-height: 105px;
      padding: var(--space-2) var(--space-3);
    }
    .card-name {
      font-size: 0.75rem;
    }
    .card-role,
    .card-year {
      font-size: 0.5625rem;
    }
    .card-desc {
      font-size: 0.625rem;
      -webkit-line-clamp: 2;
    }
  }

  /* Extra small mobile */
  @media (max-width: 375px) {
    .featured-card {
      flex: 0 0 160px;
      min-width: 160px;
    }
    .timeline-card {
      flex: 0 0 145px;
      min-width: 145px;
    }
  }

  /* ============================================
     BENTO GRID TIMELINE LAYOUT
     ============================================ */

  .bento-panel {
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
    padding: var(--space-4) var(--space-6) var(--space-4);
  }

  .bento-header {
    display: flex;
    align-items: baseline;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
    flex-shrink: 0;
  }

  .bento-title {
    font-size: clamp(1.5rem, 4vw, 2rem);
    font-weight: 700;
    display: flex;
    gap: 0.05em;
    margin: 0;
  }

  .title-accent {
    color: var(--color-accent-gold);
  }

  .title-subtext {
    font-family: var(--font-mono, monospace);
    font-size: 0.6875rem;
    color: var(--color-ink-muted);
    opacity: 0.4;
  }

  .bento-layout {
    display: grid;
    grid-template-columns: 2.5fr 1fr;
    gap: var(--space-5);
    flex: 1;
    min-height: 0;
    height: 100%;
  }

  /* Left column: Products + OSS stacked */
  .bento-left {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    min-width: 0;
    min-height: 0;
  }

  /* Right column: Experience + Education stacked */
  .bento-right {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    min-width: 0;
    min-height: 0;
    overflow-y: auto;
    padding-right: var(--space-2);
  }

  .bento-right::-webkit-scrollbar {
    width: 3px;
  }
  .bento-right::-webkit-scrollbar-track {
    background: transparent;
  }
  .bento-right::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
  }

  /* ============================================
     BENTO GRID - Products Area (compact)
     ============================================ */

  .bento-grid {
    display: grid;
    grid-template-columns: 1.4fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: var(--space-2);
    flex: 0 0 auto;
    max-height: 32vh;
  }

  /* Hero card spans 2 rows in first column */
  .bento-hero {
    grid-column: 1;
    grid-row: 1 / span 2;
  }

  /* Small cards fill remaining 3 columns in 2 rows */
  .bento-small:nth-of-type(2) { grid-column: 2; grid-row: 1; }
  .bento-small:nth-of-type(3) { grid-column: 3; grid-row: 1; }
  .bento-small:nth-of-type(4) { grid-column: 4; grid-row: 1; }
  .bento-small:nth-of-type(5) { grid-column: 2; grid-row: 2; }
  .bento-small:nth-of-type(6) { grid-column: 3; grid-row: 2; display: none; }
  .bento-small:nth-of-type(7) { grid-column: 4; grid-row: 2; display: none; }

  /* ============================================
     BENTO CARDS - Base Styles
     ============================================ */

  .bento-card {
    position: relative;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    border-radius: var(--radius-lg);
    overflow: hidden;
    background: var(--color-surface);
    border: 1px solid var(--color-border-subtle);
    opacity: 0;
    transform: translateY(12px);
    transition:
      transform 300ms cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 300ms var(--ease-out);
  }

  .panel-visible .bento-card {
    animation: bentoReveal 450ms var(--ease-out) forwards;
    animation-delay: calc(80ms + var(--card-index, 0) * 80ms);
  }

  @keyframes bentoReveal {
    0% {
      opacity: 0;
      transform: translateY(12px) scale(0.98);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .bento-card:hover {
    transform: translateY(-6px);
    box-shadow:
      0 16px 40px -8px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.08);
    border-color: var(--color-border-accent);
  }

  /* Shimmer sweep effect on hover */
  .bento-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(255, 255, 255, 0.03) 45%,
      rgba(255, 255, 255, 0.06) 50%,
      rgba(255, 255, 255, 0.03) 55%,
      transparent 60%
    );
    transform: translateX(-100%);
    transition: transform 600ms var(--ease-out);
    pointer-events: none;
    z-index: 2;
  }

  .bento-card:hover::before {
    transform: translateX(100%);
  }

  /* ============================================
     BENTO HERO CARD (Canon - spans 2 rows)
     ============================================ */

  .bento-hero {
    display: flex;
    flex-direction: column;
  }

  .bento-hero .bento-card-screenshot {
    flex: 1;
    min-height: 0;
    aspect-ratio: auto;
  }

  .bento-hero .bento-card-info {
    padding: var(--space-3);
  }

  .bento-hero .bento-card-name {
    font-size: 0.9375rem;
    font-weight: 700;
  }

  .bento-hero .bento-card-desc {
    font-size: 0.75rem;
    -webkit-line-clamp: 2;
    margin-top: var(--space-1);
  }

  /* ============================================
     BENTO CARD SCREENSHOT
     ============================================ */

  .bento-card-screenshot {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: var(--color-surface);
  }

  .bento-card-screenshot img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    transition: transform 500ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .bento-card-screenshot img.crop-contain {
    object-fit: contain;
    padding: var(--space-2);
  }

  .bento-card-screenshot img.crop-center {
    object-fit: cover;
    object-position: center;
  }

  .bento-card:hover .bento-card-screenshot img {
    transform: scale(1.04);
  }

  .bento-card:hover .bento-card-screenshot img.crop-contain {
    transform: scale(1.02);
  }

  /* Compact screenshot for small cards */
  .bento-card-screenshot--compact {
    aspect-ratio: 4 / 3;
  }

  /* Overlay with arrow */
  .bento-card-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0) 50%,
      rgba(0, 0, 0, 0.5) 100%
    );
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 250ms var(--ease-out);
    z-index: 1;
  }

  .bento-card:hover .bento-card-overlay {
    opacity: 1;
  }

  .bento-card-arrow {
    padding: 10px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 50%;
    color: var(--color-paper);
    transform: scale(0.8) rotate(-5deg);
    transition: transform 300ms var(--ease-bounce);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .bento-card:hover .bento-card-arrow {
    transform: scale(1) rotate(0deg);
  }

  /* ============================================
     BENTO CARD INFO
     ============================================ */

  .bento-card-info {
    padding: var(--space-2) var(--space-3);
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .bento-card-info--compact {
    padding: var(--space-1) var(--space-2);
  }

  .bento-card-meta {
    display: flex;
    flex-direction: column;
    gap: 1px;
  }

  .bento-card-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-ink);
    transition: color 200ms;
  }

  .bento-card:hover .bento-card-name {
    color: var(--color-accent-gold);
  }

  .bento-card-tag {
    font-size: 0.5625rem;
    font-family: var(--font-mono);
    color: var(--color-ink-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .bento-card-desc {
    font-size: 0.75rem;
    color: var(--color-ink-light);
    line-height: 1.45;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* ============================================
     BENTO OSS SECTION (expanded grid)
     ============================================ */

  .bento-oss-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    flex: 1;
    min-height: 0;
  }

  .bento-section-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding-left: var(--space-1);
    flex-shrink: 0;
  }

  .bento-section-label {
    font-size: 0.625rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-accent-gold);
  }

  .bento-section-count {
    font-family: var(--font-mono);
    font-size: 0.5625rem;
    color: var(--color-ink-muted);
    opacity: 0.5;
  }

  /* OSS Grid Layout - fills available space */
  .bento-oss-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: var(--space-3);
    flex: 1;
    min-height: 0;
    align-content: start;
  }

  .bento-oss-card {
    padding: var(--space-4);
    border-radius: var(--radius-md);
    text-decoration: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    opacity: 0;
    transform: translateY(8px);
    border: 1px solid var(--color-border-subtle);
    transition:
      transform 300ms var(--ease-out),
      box-shadow 300ms var(--ease-out),
      border-color 300ms var(--ease-out);
  }

  .panel-visible .bento-oss-card {
    animation: bentoReveal 400ms var(--ease-out) forwards;
    animation-delay: calc(250ms + var(--card-index, 0) * 40ms);
  }

  .bento-oss-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 28px -6px rgba(0, 0, 0, 0.4);
    border-color: var(--color-border-accent);
  }

  .bento-oss-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  .bento-oss-gh {
    color: var(--color-ink-muted);
    opacity: 0.6;
    flex-shrink: 0;
  }

  .bento-oss-name {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--color-ink);
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: color 200ms;
  }

  .bento-oss-card:hover .bento-oss-name {
    color: var(--color-accent-gold);
  }

  .bento-oss-arrow {
    color: var(--color-ink-muted);
    opacity: 0.3;
    flex-shrink: 0;
    transition: opacity 200ms, transform 200ms;
  }

  .bento-oss-card:hover .bento-oss-arrow {
    opacity: 0.8;
    transform: translate(2px, -2px);
  }

  .bento-oss-desc {
    font-size: 0.6875rem;
    color: var(--color-ink-light);
    line-height: 1.5;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Peer dimming */
  .bento-oss-grid:hover .bento-oss-card:not(:hover) {
    opacity: 0.65;
  }

  /* ============================================
     BENTO EXPERIENCE SECTION (right column)
     ============================================ */

  .bento-experience-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    flex: 0 0 auto;
  }

  .bento-experience-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .bento-exp-item {
    padding: var(--space-3);
    border-radius: var(--radius-md);
    background: var(--color-surface);
    border: 1px solid var(--color-border-subtle);
    opacity: 0;
    transform: translateX(12px);
    transition:
      background 200ms,
      border-color 200ms,
      transform 300ms var(--ease-out),
      box-shadow 300ms var(--ease-out);
  }

  .panel-visible .bento-exp-item {
    animation: expSlide 400ms var(--ease-out) forwards;
    animation-delay: calc(150ms + var(--item-index, 0) * 50ms);
  }

  @keyframes expSlide {
    0% { opacity: 0; transform: translateX(12px); }
    100% { opacity: 1; transform: translateX(0); }
  }

  .bento-exp-item:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--color-border-accent);
    transform: translateX(3px);
    box-shadow: 0 4px 16px -4px rgba(0, 0, 0, 0.25);
  }

  .bento-exp-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: var(--space-2);
    margin-bottom: 2px;
  }

  .bento-exp-name {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-ink);
    line-height: 1.3;
  }

  .bento-exp-item:hover .bento-exp-name {
    color: var(--color-accent-gold);
  }

  .bento-exp-year {
    font-family: var(--font-mono);
    font-size: 0.625rem;
    color: var(--color-accent-gold);
    flex-shrink: 0;
  }

  .bento-exp-role {
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--color-ink-light);
    display: block;
    margin-bottom: var(--space-1);
  }

  .bento-exp-desc {
    font-size: 0.625rem;
    color: var(--color-ink-muted);
    line-height: 1.45;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* ============================================
     BENTO EDUCATION SECTION
     ============================================ */

  .bento-education-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    flex-shrink: 0;
  }

  .bento-education-grid {
    display: flex;
    gap: var(--space-2);
  }

  .bento-edu-item {
    flex: 1;
    padding: var(--space-3);
    border-radius: var(--radius-md);
    background: var(--color-surface);
    border: 1px solid var(--color-border-subtle);
    display: flex;
    flex-direction: column;
    gap: 3px;
    opacity: 0;
    transform: translateY(8px);
    transition:
      background 200ms,
      border-color 200ms,
      transform 300ms var(--ease-out);
  }

  .panel-visible .bento-edu-item {
    animation: expSlide 400ms var(--ease-out) forwards;
    animation-delay: calc(350ms + var(--item-index, 0) * 50ms);
  }

  .bento-edu-item:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: var(--color-border-accent);
    transform: translateY(-2px);
  }

  .bento-edu-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-ink);
    line-height: 1.3;
  }

  .bento-edu-item:hover .bento-edu-name {
    color: var(--color-accent-gold);
  }

  .bento-edu-role {
    font-size: 0.625rem;
    color: var(--color-ink-light);
  }

  .bento-edu-year {
    font-family: var(--font-mono);
    font-size: 0.5625rem;
    color: var(--color-ink-muted);
    margin-top: auto;
  }

  /* ============================================
     BENTO RESPONSIVE - Tablet & Mobile
     ============================================ */

  @media (max-width: 1200px) {
    .bento-layout {
      grid-template-columns: 2fr 1fr;
    }

    .bento-grid {
      grid-template-columns: 1.2fr 1fr 1fr;
      max-height: 36vh;
    }

    /* Only show 3 small cards on narrower screens */
    .bento-small:nth-of-type(5) {
      display: none;
    }
  }

  @media (max-width: 1024px) {
    .bento-layout {
      grid-template-columns: 1.8fr 1fr;
      gap: var(--space-4);
    }

    .bento-grid {
      grid-template-columns: 1.5fr 1fr 1fr;
      gap: var(--space-2);
    }

    .bento-exp-item {
      padding: var(--space-2);
    }

    .bento-exp-name {
      font-size: 0.8125rem;
    }

    .bento-exp-desc {
      display: none;
    }
  }

  @media (max-width: 768px) {
    .bento-panel {
      padding: var(--space-3) var(--space-4) calc(var(--space-16) + var(--space-4));
      overflow-y: auto;
    }

    .bento-layout {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
      height: auto;
      min-height: 100%;
    }

    .bento-left {
      flex: 0 0 auto;
    }

    .bento-right {
      flex: 0 0 auto;
      overflow-y: visible;
      padding-right: 0;
    }

    .bento-grid {
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto;
      gap: var(--space-2);
      max-height: none;
    }

    .bento-hero {
      grid-column: 1 / span 2;
      grid-row: 1;
    }

    .bento-small:nth-of-type(2) { grid-column: 1; grid-row: 2; display: flex; }
    .bento-small:nth-of-type(3) { grid-column: 2; grid-row: 2; display: flex; }
    .bento-small:nth-of-type(4) { display: none; }
    .bento-small:nth-of-type(5) { display: none; }

    .bento-hero .bento-card-screenshot {
      aspect-ratio: 16 / 9;
    }

    .bento-oss-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-2);
    }

    .bento-oss-card {
      padding: var(--space-3);
    }

    .bento-experience-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-2);
    }

    .bento-exp-item {
      padding: var(--space-2);
    }

    .bento-exp-name {
      font-size: 0.75rem;
    }

    .bento-exp-role {
      font-size: 0.625rem;
    }

    .bento-education-grid {
      flex-direction: row;
    }

    .bento-edu-item {
      padding: var(--space-2);
    }

    .bento-edu-name {
      font-size: 0.6875rem;
    }
  }

  @media (max-width: 480px) {
    .bento-grid {
      grid-template-columns: 1fr;
      grid-template-rows: auto;
    }

    .bento-hero {
      grid-column: 1;
      grid-row: 1;
    }

    .bento-small:nth-of-type(2) { grid-column: 1; grid-row: 2; }
    .bento-small:nth-of-type(3) { display: none; }

    .bento-oss-grid {
      grid-template-columns: 1fr;
    }

    .bento-experience-list {
      grid-template-columns: 1fr;
    }

    .bento-education-grid {
      flex-direction: column;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .bento-card,
    .bento-sidebar,
    .bento-sidebar-item,
    .bento-oss-card {
      animation: none !important;
      transition: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }

  /* Panel scroll container for internal vertical scrolling */
  .panel-scroll {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    padding-top: 64px; /* Nav height */
  }

  .panel-scroll--no-pad {
    padding-top: 0;
  }

  /* Hide scrollbar but allow scroll */
  .panel-scroll::-webkit-scrollbar {
    width: 6px;
  }
  .panel-scroll::-webkit-scrollbar-track {
    background: transparent;
  }
  .panel-scroll::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }
  .panel-scroll::-webkit-scrollbar-thumb:hover {
    background: var(--color-ink-muted);
  }

  /* Edge Navigation */
  .edge-nav {
    position: fixed;
    top: 0;
    bottom: 0;
    width: 48px;
    z-index: 80;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 200ms;
  }

  .edge-nav:hover {
    background: rgba(255, 255, 255, 0.03);
  }

  .edge-nav--left {
    left: 0;
    border-right: 1px solid var(--color-border-subtle);
  }

  .edge-nav--right {
    right: 0;
    border-left: 1px solid var(--color-border-subtle);
  }

  .edge-nav.hidden {
    opacity: 0;
    pointer-events: none;
  }

  .edge-nav-text {
    writing-mode: vertical-lr;
    font-size: 0.625rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-ink-muted);
    transition: color 200ms;
  }

  .edge-nav:hover .edge-nav-text {
    color: var(--color-accent-gold);
  }

  .edge-nav--left .edge-nav-text {
    transform: rotate(180deg);
  }

  /* Hide edge navigation on mobile - wastes precious space */
  @media (max-width: 768px) {
    .edge-nav {
      display: none;
    }
  }

  /* Timeline Vertical Sidebar - REMOVED, using edge-nav instead */
  /*
  .timeline-sidebar {
    width: 48px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-left: 1px solid var(--color-border-subtle);
    background: var(--color-paper);
  }

  .sidebar-stats {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
    writing-mode: vertical-lr;
    text-orientation: mixed;
  }

  .sidebar-stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }

  .sidebar-number {
    font-family: var(--font-display);
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--color-ink);
    line-height: 1;
  }

  .sidebar-label {
    font-size: 0.5rem;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--color-ink-muted);
  }

  @media (max-width: 768px) {
    .timeline-sidebar {
      width: 36px;
    }
    .sidebar-stats {
      gap: var(--space-4);
    }
    .sidebar-number {
      font-size: 0.75rem;
    }
    .sidebar-label {
      font-size: 0.4375rem;
    }
  }
  */

  /* Bottom navigation pill - single row, compact */
  .side-nav {
    position: fixed;
    bottom: var(--space-6);
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: var(--space-3);
    z-index: 100;
    opacity: 1;
    transition: opacity var(--duration-slow) var(--ease-default);
    /* Thin pill */
    padding: 6px 16px;
    background: rgba(28, 25, 20, 0.9);
    backdrop-filter: blur(16px);
    border-radius: 100px;
    border: 1px solid var(--color-border-subtle);
  }

  .current-label {
    font-size: 0.6rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--color-accent-gold);
    min-width: 52px;
    text-align: center;
  }

  /* Thin progress bar at bottom of pill */
  .pull-bar {
    position: absolute;
    bottom: 0;
    left: 16px;
    right: 16px;
    height: 2px;
    background: transparent;
    border-radius: 0 0 100px 100px;
    overflow: hidden;
  }

  .pull-progress {
    height: 100%;
    width: 0%;
    background: var(--color-accent-gold);
    transition: width 0.05s linear;
  }

  .side-nav.hidden {
    opacity: 0;
    pointer-events: none;
  }

  @media (max-width: 768px) {
    .side-nav {
      bottom: var(--space-4);
      padding: 5px 12px;
      gap: var(--space-2);
      /* Ensure safe area inset on iOS */
      bottom: max(var(--space-4), env(safe-area-inset-bottom, 0px));
    }
    .current-label {
      font-size: 0.55rem;
      min-width: 44px;
    }
  }

  /* Extra small mobile - more compact nav */
  @media (max-width: 375px) {
    .side-nav {
      padding: 4px 10px;
      gap: 6px;
    }
    .side-nav-dots {
      gap: 4px;
    }
    .current-label {
      font-size: 0.5rem;
      min-width: 38px;
    }
  }

  .side-nav-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: none;
    border: none;
    color: var(--color-ink-muted);
    cursor: pointer;
    transition: color var(--duration-fast) var(--ease-default);
    padding: 0;
  }

  .side-nav-arrow svg {
    width: 12px;
    height: 12px;
  }

  .side-nav-arrow:hover {
    color: var(--color-ink);
  }

  .side-nav-dots {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 6px;
  }

  .side-nav-dot {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 12px;
    height: 12px;
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
  }

  /* Vertical tick marks */
  .dot-line {
    width: 2px;
    height: 8px;
    background: var(--color-ink-muted);
    border-radius: 1px;
    transition:
      background var(--duration-fast) var(--ease-default),
      transform var(--duration-fast) var(--ease-default);
  }

  .side-nav-dot:hover .dot-line {
    background: var(--color-ink-light);
  }

  .side-nav-dot.active .dot-line {
    background: var(--color-accent-gold);
    transform: scaleY(1.4);
  }

  /* Contact panel specific styling */
  .contact-panel {
    background: var(--color-paper);
  }

  .contact-scroll {
    display: flex;
    flex-direction: column;
    min-height: 100%;
  }

  /* Ensure footer stays at bottom with proper spacing */
  .contact-scroll :global(.footer) {
    margin-top: auto;
    flex-shrink: 0;
  }

  @media (max-width: 768px) {
    .contact-scroll {
      padding-bottom: calc(var(--space-16) + var(--space-4));
    }
  }

</style>
